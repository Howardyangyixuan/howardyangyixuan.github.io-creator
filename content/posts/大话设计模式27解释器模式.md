---
title: "大话设计模式27：解释器模式"
date: 2020-08-30T11:28:19+08:00
draft: false
tags: ["设计模式", "面向对象"]
categories: ["大话设计模式笔记"]
---

# 大话设计模式：27.解释器模式

> 解释器模式：给定一个语言，定义它的文法的一种表示，并定义一个解释器，给这个解释器使用该表示来解释语言中的句子

> TL;DR：如果一种特定类型的问题发生的频率足够高，那么可能就值得将该问题的各个实例表述为一个简单语言中的句子。这样就可以构建一个解释器，该解释器通过解释这些句子来解决该问题

![解释器模式结构图](/images/解释器模式.jpg)

## 1.优缺点

1. 优点
   1. 易于改变和拓展文法，因为该模式使用类来表示文法规则，可以使用继承来改变或拓展文法
   2. 易于实现文法，因为定义抽象语法树中各个节点的类的实现大体相似，并且易于直接编写
2. 缺点
   1. 文法中的每一条规则至少定义了一个类，因此许多规则的文法可能难以管理和维护，当文法非常复杂时，需要使用语法分析程序或编译器生成器俩处理

## 2.实现细节

1. AbstractExpression 类：抽象表达式类，声明一个抽象的解释操作，解释操作接收一个 Context 全局信息，这个接口为抽象语法树中所有的节点所共享
2. TerminalExpression 类：终结符表达式类，实现与文法中的终结符相关联的解释操作，实现抽象表达式中所要求的接口，文法中的每一个终结符都有一个具体终结表达式与之相对应
3. UnsharedConcreteFlyweight 类：非终结符表达式类，文法中的非终结符实现解释操作，对文法中每一条规则都需要一个具体的非终结表达式类
4. Context 类：包含解释器外的一些全局信息

## 3.使用场景

1. 当一个语言需要解释执行，并且你可将该语言中的句子表示为一个抽象语法树时
